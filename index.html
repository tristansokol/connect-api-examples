<html>
<head>
  <title>My Payment Form</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://js.squareup.com/v2/paymentform"></script>
  <script type="text/javascript">
   var paymentForm = new SqPaymentForm({
    applicationId: applicationId,
    inputClass: 'sq-input',
    inputStyles: [
        {
            fontSize: '16px'
        }
    ],
    cardNumber: {
        elementId: 'sq-card-number',
        placeholder: '**** **** **** ****'
    },
    cvv: {
        elementId: 'sq-cvv',
        placeholder: 'cvv'
    },
    expirationDate: {
        elementId: 'sq-expiration-date',
        placeholder: 'mm/yy'
    },
    postalCode: {
        elementId: 'sq-postal-code',
        placeholder: '*****'
    },
    callbacks: {
        // Called when SqPaymentForm completes a request to generate a card
        // nonce, even if the request failed because of an error.
        cardNonceResponseReceived: function(errors, nonce, cardData){
            if(errors){
                $.mobile.loading("hide");
                var eString = '';
                errors.forEach(function(error){
                    eString += "<p>" + error.message + "</p>";
                });
                $("#paymentErr").html(eString);
                $("#pay").prop("disabled", false);
                $("#back").prop("disabled", false);
                return;
            }
            /*
                Call cloud code to process payment with nonce
            */
            charge(nonce, cardData["billing_postal_code"]);
        },
        unsupportedBrowserDetected: function(){
            $("#paymentErr").text("This browser is currently not supported by Square, our payment processor");
        },
        inputEventReceived: function(inputEvent){
            switch(inputEvent.eventType){
                case 'focusClassAdded':
                    break;
                case 'focusClassRemoved':
                    break;
                case 'errorClassAdded':
                    break;
                case 'errorClassRemoved':
                    break;
                case 'postalCodeChanged':
                    break;
            }
        },
        paymentFormLoaded: function(){
            // Perform actions after payment done loading
        }
    }
});
    function submitButtonClick(event) {
      event.preventDefault();
      sqPaymentForm.requestCardNonce();
    }
  </script>
  <style type="text/css">
    .sq-input {
      border: 1px solid #CCCCCC;
      margin-bottom: 10px;
      padding: 1px;
    }
    .sq-input--focus {
      outline-width: 5px;
      outline-color: #70ACE9;
      outline-offset: -1px;
      outline-style: auto;
    }
    .sq-input--error {
      outline-width: 5px;
      outline-color: #FF9393;
      outline-offset: 0px;
      outline-style: auto;
    }
  </style>
</head>
<body>

  <h1>My Payment Form</h1>

<form id="payment-form">
    <p class="err" id="paymentErr"></p>
    <div class="saved" id="saved"></div>
    <label>Card Number</label>
    <div id="sq-card-number"></div>
    <label>CVV</label>
    <div id="sq-cvv"></div>
    <label>Expiration Date</label>
    <div id=sq-expiration-date></div>
    <label>Postal Code</label>
    <div id="sq-postal-code"></div>
</form>

  <div id="errors"></div>
</body>
</html>
